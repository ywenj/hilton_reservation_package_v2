# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Reservation {
  _id: ID!

  """Optimistic lock version"""
  version: Int!

  """Owner user id (JWT sub)"""
  userId: String
  guestName: String!
  contactPhone: String!
  contactEmail: String
  expectedArrival: String!
  tableSize: Int!
  status: ReservationStatus!

  """Reservation detail loaded via DataLoader (N+1 safe)"""
  detail: ReservationDetail
}

enum ReservationStatus {
  Requested
  Approved
  Completed
  Cancelled
}

type ReservationDetail {
  _id: ID!

  """Associated reservation ID"""
  reservationId: String!

  """Seating preference (e.g. window, patio)"""
  seatingPreference: String

  """Special occasion (e.g. birthday, anniversary)"""
  occasion: String

  """Dietary requirements (e.g. vegetarian, gluten-free)"""
  dietaryRequirements: String

  """Additional notes or special requests"""
  specialRequests: String
}

type Query {
  reservations(date: String, status: String): [Reservation!]!
  myReservations: [Reservation!]!
  reservation(id: String!): Reservation
}

type Mutation {
  createReservation(input: CreateReservationInput!): Reservation!
  updateReservation(id: String!, input: UpdateReservationInput!): Reservation!
  setReservationStatus(id: String!, status: String!, version: Int!): Reservation!
  cancelMyReservation(id: String!, version: Int!): Reservation!
}

input CreateReservationInput {
  expectedArrival: String!
  tableSize: Int!
}

input UpdateReservationInput {
  """Optimistic lock version (required)"""
  version: Int!
  expectedArrival: String
  tableSize: Int
}